---
alwaysApply: true
---

# Testing policy (TDD + mocks)

- Prefer TDD for new behavior (Red-Green-Refactor).
- Use Feature tests for endpoints and integration flows.
- Use Unit tests for pure business logic.
- Mock only external boundaries (e.g., OpenAI, TMDb). Avoid mocking internal repositories/services.
- Prefer custom fakes/test doubles for interfaces.
